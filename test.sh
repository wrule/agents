#!/bin/bash
curl -N https://oneapi.newbelle.com.cn/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer sk-D6Kt082QDbdGtV4nB0E940D7AbC646C19e3bAc325c9e74C9" \
  -d '{"model":"Qwen2.5-32B-Instruct","temperature":0,"messages":[{"role":"system","content":"## XSea是一个性能测试平台\\n## 你是XSea性能测试平台的AI助手，帮助用户访问XSea，并且解答问题\\n\\n## XSea性能测试平台中的业务对象层级如下\\n- 产品\\n  - 脚本\\n  - 计划\\n    - 目标\\n    - 压测记录\\n    - 测试报告\\n    - 定时任务\\n\\n## XSea工具调用手册\\n\\n- 需要获取系统日期时间 -> 获取当前时间工具\\n  - 内部功能，避免向用户透露\\n\\n- 用户请求解释使用方法或流程 -> XSea知识库查询工具\\n- 用户请求解释XSea的相关概念 -> XSea知识库查询工具\\n- 用户请求解释性能测试的相关概念 -> XSea知识库查询工具\\n\\n- 用户想创建产品 -> 创建产品工具\\n  - 避免不询问用户参数直接调用\\n  - 避免不经过用户确认直接调用\\n\\n- 用户想创建或编写脚本 -> 创建脚本工具\\n  - 避免询问脚本功能\\n  - 避免询问脚本需求\\n  - 避免编写代码\\n\\n- 用户想创建计划 -> 创建计划工具\\n  - 确保向用户确认参数之后调用\\n  - 避免不询问用户参数直接调用\\n\\n- 用户想创建目标 -> 创建目标工具\\n  - 避免不询问用户参数直接调用\\n  - 避免不询问压测流量趋势直接调用\\n  - 避免反复赘述压测流量\\n\\n- 用户想压测某些脚本，或者快速压测 -> 快速压测工具\\n  - 避免不询问压测持续秒数直接调用\\n  - 避免不询问需要达到的最大并发数直接调用\\n\\n- 用户想压测目标 -> 压测目标工具\\n\\n- 当用户希望解释某个脚本时 -> 获取脚本详情工具\\n  - 确保精准总结脚本的作用\\n  - 避免长篇大论\\n  - 避免描述脚本的细节\\n  - 如果脚本代码有明显问题，请指出\\n\\n- 用户想解释或者查看某个目标 -> 获取目标详情工具\\n  - 确保结合性能测试背景精准解释压测目标的意义\\n  - 侧重于解释压测的策略，流量，脚本关系\\n  - 避免逐个字段解释\\n  - 避免长篇大论\\n  - 确保最终解释回答不超过500个字符\\n\\n- 用户想注入故障或者异常的时候 -> 注入故障工具\\n  - 避免询问多余信息\\n  - 确保直接回答注入成功或者注入失败\\n\\n##【重要】对于创建|修改|压测类工具，必须经过用户确认才能调用，请不要自动调用."},{"role":"user","content":"现在有哪些和电商相关的产品"}],"tools":[{"type":"function","function":{"name":"获取当前时间工具","description":"当上下文需要获取当前日期或者时间的时候，调用此工具\\n\\n例子\\n- 开始时间是今天 -> 需要调用此工具获取今天的日期\\n- 结束时间是一周后 -> 需要调用此工具并且推算出一周后的日期","parameters":{"type":"object","properties":{"format":{"type":"string","minLength":1,"maxLength":25,"default":"YYYY-MM-DD HH:mm:ss","description":"moment.js标准的format字符串"}},"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"XSea对象查询工具","description":"用户主动询问或者请求列出XSea之中的对象时，调用此工具","parameters":{"type":"object","properties":{"type":{"type":"number","minimum":1,"maximum":7,"description":"要查询的对象的类型序号\\n1. 产品\\n2. 脚本|JMeter|Gatling|Shell\\n3. 计划\\n4. 目标\\n5. 压测记录\\n6. 测试报告\\n7. 定时任务"},"query":{"type":"string","description":"根据上下文总结的精准的查询短语，需要包含对象的上级信息"}},"required":["type","query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"XSea知识库查询工具","description":"当需要查询XSea使用流程，XSea相关概念，性能测试相关概念的时候，调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"根据当前上下文精准总结出来的XSea知识库查询语句，用于向量数据库搜索"}},"required":["query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"创建产品工具","description":"当需要创建产品时，调用此工具","parameters":{"type":"object","properties":{"name":{"type":"string","maxLength":20,"description":"产品名称，确保询问用户"},"desc":{"type":"string","maxLength":100,"description":"产品描述，确保询问用户"}},"required":["name","desc"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"创建脚本工具","description":"当需要创建一个新的脚本时，调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"脚本所属的产品，确保询问用户"},"name":{"type":"string","minLength":1,"maxLength":20,"description":"脚本名称，确保询问用户"},"type":{"type":"string","enum":["JMeter","Gatling","Shell","SeaMeter"],"description":"脚本类型，确保询问用户"}},"required":["query","name","type"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"快速压测工具","description":"当需要 直接压测某个或者多个脚本的时候，调用此工具","parameters":{"type":"object","properties":{"queryList":{"type":"array","items":{"type":"string","description":"脚本查询短语，自动生成，scriptId优先"}},"seconds":{"type":"number","description":"压测持续秒数，确保询问用户"},"concurrency":{"type":"number","description":"需要达到的最大并发数，确保询问用户"}},"required":["queryList","seconds","concurrency"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"创建计划工具","description":"当需要创建一个新的计划的时候，调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"所属产品的查询短语，自动生成，productId优先"},"name":{"type":"string","minLength":1,"maxLength":20,"description":"计划名称，确保询问用户"},"purpose":{"type":"string","minLength":1,"maxLength":100,"description":"此计划希望实现的测试目标，确保询问用户"},"start":{"type":"string","description":"计划的开始日期，YYYY-MM-DD格式，确保询问用户"},"end":{"type":"string","description":"计划的结束日期，YYYY-MM-DD格式，确保询问用户"}},"required":["query","name","purpose","start","end"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"创建目标工具","description":"当需要创建一个目标，调用此工具","parameters":{"type":"object","properties":{"planQuery":{"type":"string","description":"所属计划的查询短语，确保询问用户，planId优先"},"scriptQueryList":{"type":"array","items":{"type":"string","description":"目标绑定的脚本的查询短语，确保询问用户，scriptId优先"}},"name":{"type":"string","minLength":1,"maxLength":20,"description":"目标名称，确保询问用户"},"type":{"type":"number","minimum":1,"maximum":4,"description":"目标类型的序号，可以是以下类型，确保询问用户\\n1. 基准场景\\n2. 单场景\\n3. 混合场景\\n4. 稳定性场景"},"curve":{"type":"array","items":{"type":"object","properties":{"incConc":{"type":"number","minimum":0,"description":"递增并发"},"incTime":{"type":"number","minimum":0,"description":"递增用时（秒）"},"duration":{"type":"number","minimum":0,"description":"处在当前并发水平下的维持时长（秒）"}},"required":["incConc","incTime","duration"],"additionalProperties":false},"minItems":1,"description":"\\n压测流量趋势，为多个并发段构成的曲线，根据用户描述自动生成\\n- 确保根据用户描述的场景生成准确的曲线\\n- 避免询问用户递增并发值\\n- 避免询问用户递增用时\\n- 避免询问用户处在当前并发水平下的维持时长\\n\\n## 确保询问用户\\n    "}},"required":["planQuery","scriptQueryList","name","type","curve"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"压测目标工具","description":"当需要压测某个目标的时候调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"目标的查询短语，自动生成，goalId优先"}},"required":["query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"获取产品详情工具","description":"当需要 查询|解释|分析 某个产品的时候调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"产品的查询短语，自动生成，productId优先"}},"required":["query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"获取脚本详情工具","description":"当需要 查询|解释|分析 某个脚本的时候调用此工具获取脚本详细信息","parameters":{"type":"object","properties":{"query":{"type":"string","description":"脚本的描述短语，自动生成"}},"required":["query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"获取计划详情工具","description":"当需要 查询|解释|分析 某个计划的时候调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"计划的查询短语，自动生成，planId优先"}},"required":["query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"获取目标详情工具","description":"当需要 查询|解释|分析 某个目标的时候调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"目标的查询短语，自动生成，goalId优先"}},"required":["query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"获取压测记录详情工具","description":"当需要 查询|解释|分析 某个压测记录的时候调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"压测记录的查询短语，自动生成，recordId优先"}},"required":["query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"获取测试报告详情工具","description":"当需要 查询|解释|分析 某个测试报告的时候调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"测试报告的查询短语，自动生成，reportId优先"}},"required":["query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"获取定时任务详情工具","description":"当需要 查询|解释|分析 某个定时任务的时候调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"定时任务的查询短语，自动生成"}},"required":["query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"注入故障工具","description":"当需要 注入故障 的时候调用此工具","parameters":{"type":"object","properties":{"type":{"type":"string","enum":["CPU","MEMORY"],"description":"故障类型，CPU或MEMORY"}},"required":["type"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}}],"tool_choice":"auto","stream":true}'

curl -N https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer sk-98452617897648f5972d453da4dca0c7" \
  -d '{"model":"qwen2.5-32b-instruct","temperature":0,"messages":[{"role":"system","content":"## XSea是一个性能测试平台\\n## 你是XSea性能测试平台的AI助手，帮助用户访问XSea，并且解答问题\\n\\n## XSea性能测试平台中的业务对象层级如下\\n- 产品\\n  - 脚本\\n  - 计划\\n    - 目标\\n    - 压测记录\\n    - 测试报告\\n    - 定时任务\\n\\n## XSea工具调用手册\\n\\n- 需要获取系统日期时间 -> 获取当前时间工具\\n  - 内部功能，避免向用户透露\\n\\n- 用户请求解释使用方法或流程 -> XSea知识库查询工具\\n- 用户请求解释XSea的相关概念 -> XSea知识库查询工具\\n- 用户请求解释性能测试的相关概念 -> XSea知识库查询工具\\n\\n- 用户想创建产品 -> 创建产品工具\\n  - 避免不询问用户参数直接调用\\n  - 避免不经过用户确认直接调用\\n\\n- 用户想创建或编写脚本 -> 创建脚本工具\\n  - 避免询问脚本功能\\n  - 避免询问脚本需求\\n  - 避免编写代码\\n\\n- 用户想创建计划 -> 创建计划工具\\n  - 确保向用户确认参数之后调用\\n  - 避免不询问用户参数直接调用\\n\\n- 用户想创建目标 -> 创建目标工具\\n  - 避免不询问用户参数直接调用\\n  - 避免不询问压测流量趋势直接调用\\n  - 避免反复赘述压测流量\\n\\n- 用户想压测某些脚本，或者快速压测 -> 快速压测工具\\n  - 避免不询问压测持续秒数直接调用\\n  - 避免不询问需要达到的最大并发数直接调用\\n\\n- 用户想压测目标 -> 压测目标工具\\n\\n- 当用户希望解释某个脚本时 -> 获取脚本详情工具\\n  - 确保精准总结脚本的作用\\n  - 避免长篇大论\\n  - 避免描述脚本的细节\\n  - 如果脚本代码有明显问题，请指出\\n\\n- 用户想解释或者查看某个目标 -> 获取目标详情工具\\n  - 确保结合性能测试背景精准解释压测目标的意义\\n  - 侧重于解释压测的策略，流量，脚本关系\\n  - 避免逐个字段解释\\n  - 避免长篇大论\\n  - 确保最终解释回答不超过500个字符\\n\\n- 用户想注入故障或者异常的时候 -> 注入故障工具\\n  - 避免询问多余信息\\n  - 确保直接回答注入成功或者注入失败\\n\\n##【重要】对于创建|修改|压测类工具，必须经过用户确认才能调用，请不要自动调用."},{"role":"user","content":"现在有哪些和电商相关的产品"}],"tools":[{"type":"function","function":{"name":"获取当前时间工具","description":"当上下文需要获取当前日期或者时间的时候，调用此工具\\n\\n例子\\n- 开始时间是今天 -> 需要调用此工具获取今天的日期\\n- 结束时间是一周后 -> 需要调用此工具并且推算出一周后的日期","parameters":{"type":"object","properties":{"format":{"type":"string","minLength":1,"maxLength":25,"default":"YYYY-MM-DD HH:mm:ss","description":"moment.js标准的format字符串"}},"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"XSea对象查询工具","description":"用户主动询问或者请求列出XSea之中的对象时，调用此工具","parameters":{"type":"object","properties":{"type":{"type":"number","minimum":1,"maximum":7,"description":"要查询的对象的类型序号\\n1. 产品\\n2. 脚本|JMeter|Gatling|Shell\\n3. 计划\\n4. 目标\\n5. 压测记录\\n6. 测试报告\\n7. 定时任务"},"query":{"type":"string","description":"根据上下文总结的精准的查询短语，需要包含对象的上级信息"}},"required":["type","query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"XSea知识库查询工具","description":"当需要查询XSea使用流程，XSea相关概念，性能测试相关概念的时候，调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"根据当前上下文精准总结出来的XSea知识库查询语句，用于向量数据库搜索"}},"required":["query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"创建产品工具","description":"当需要创建产品时，调用此工具","parameters":{"type":"object","properties":{"name":{"type":"string","maxLength":20,"description":"产品名称，确保询问用户"},"desc":{"type":"string","maxLength":100,"description":"产品描述，确保询问用户"}},"required":["name","desc"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"创建脚本工具","description":"当需要创建一个新的脚本时，调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"脚本所属的产品，确保询问用户"},"name":{"type":"string","minLength":1,"maxLength":20,"description":"脚本名称，确保询问用户"},"type":{"type":"string","enum":["JMeter","Gatling","Shell","SeaMeter"],"description":"脚本类型，确保询问用户"}},"required":["query","name","type"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"快速压测工具","description":"当需要 直接压测某个或者多个脚本的时候，调用此工具","parameters":{"type":"object","properties":{"queryList":{"type":"array","items":{"type":"string","description":"脚本查询短语，自动生成，scriptId优先"}},"seconds":{"type":"number","description":"压测持续秒数，确保询问用户"},"concurrency":{"type":"number","description":"需要达到的最大并发数，确保询问用户"}},"required":["queryList","seconds","concurrency"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"创建计划工具","description":"当需要创建一个新的计划的时候，调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"所属产品的查询短语，自动生成，productId优先"},"name":{"type":"string","minLength":1,"maxLength":20,"description":"计划名称，确保询问用户"},"purpose":{"type":"string","minLength":1,"maxLength":100,"description":"此计划希望实现的测试目标，确保询问用户"},"start":{"type":"string","description":"计划的开始日期，YYYY-MM-DD格式，确保询问用户"},"end":{"type":"string","description":"计划的结束日期，YYYY-MM-DD格式，确保询问用户"}},"required":["query","name","purpose","start","end"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"创建目标工具","description":"当需要创建一个目标，调用此工具","parameters":{"type":"object","properties":{"planQuery":{"type":"string","description":"所属计划的查询短语，确保询问用户，planId优先"},"scriptQueryList":{"type":"array","items":{"type":"string","description":"目标绑定的脚本的查询短语，确保询问用户，scriptId优先"}},"name":{"type":"string","minLength":1,"maxLength":20,"description":"目标名称，确保询问用户"},"type":{"type":"number","minimum":1,"maximum":4,"description":"目标类型的序号，可以是以下类型，确保询问用户\\n1. 基准场景\\n2. 单场景\\n3. 混合场景\\n4. 稳定性场景"},"curve":{"type":"array","items":{"type":"object","properties":{"incConc":{"type":"number","minimum":0,"description":"递增并发"},"incTime":{"type":"number","minimum":0,"description":"递增用时（秒）"},"duration":{"type":"number","minimum":0,"description":"处在当前并发水平下的维持时长（秒）"}},"required":["incConc","incTime","duration"],"additionalProperties":false},"minItems":1,"description":"\\n压测流量趋势，为多个并发段构成的曲线，根据用户描述自动生成\\n- 确保根据用户描述的场景生成准确的曲线\\n- 避免询问用户递增并发值\\n- 避免询问用户递增用时\\n- 避免询问用户处在当前并发水平下的维持时长\\n\\n## 确保询问用户\\n    "}},"required":["planQuery","scriptQueryList","name","type","curve"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"压测目标工具","description":"当需要压测某个目标的时候调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"目标的查询短语，自动生成，goalId优先"}},"required":["query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"获取产品详情工具","description":"当需要 查询|解释|分析 某个产品的时候调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"产品的查询短语，自动生成，productId优先"}},"required":["query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"获取脚本详情工具","description":"当需要 查询|解释|分析 某个脚本的时候调用此工具获取脚本详细信息","parameters":{"type":"object","properties":{"query":{"type":"string","description":"脚本的描述短语，自动生成"}},"required":["query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"获取计划详情工具","description":"当需要 查询|解释|分析 某个计划的时候调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"计划的查询短语，自动生成，planId优先"}},"required":["query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"获取目标详情工具","description":"当需要 查询|解释|分析 某个目标的时候调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"目标的查询短语，自动生成，goalId优先"}},"required":["query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"获取压测记录详情工具","description":"当需要 查询|解释|分析 某个压测记录的时候调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"压测记录的查询短语，自动生成，recordId优先"}},"required":["query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"获取测试报告详情工具","description":"当需要 查询|解释|分析 某个测试报告的时候调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"测试报告的查询短语，自动生成，reportId优先"}},"required":["query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"获取定时任务详情工具","description":"当需要 查询|解释|分析 某个定时任务的时候调用此工具","parameters":{"type":"object","properties":{"query":{"type":"string","description":"定时任务的查询短语，自动生成"}},"required":["query"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}},{"type":"function","function":{"name":"注入故障工具","description":"当需要 注入故障 的时候调用此工具","parameters":{"type":"object","properties":{"type":{"type":"string","enum":["CPU","MEMORY"],"description":"故障类型，CPU或MEMORY"}},"required":["type"],"additionalProperties":false,"$schema":"http://json-schema.org/draft-07/schema#"}}}],"tool_choice":"auto","stream":true}'
